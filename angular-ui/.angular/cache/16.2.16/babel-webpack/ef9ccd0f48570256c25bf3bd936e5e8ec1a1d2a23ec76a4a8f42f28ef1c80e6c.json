{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport { Client } from '@stomp/stompjs';\nimport * as SockJS from 'sockjs-client';\nimport * as i0 from \"@angular/core\";\nexport let InventoryService = /*#__PURE__*/(() => {\n  class InventoryService {\n    client;\n    stock$ = new BehaviorSubject(null);\n    constructor() {\n      this.client = new Client({\n        webSocketFactory: () => new SockJS('http://localhost:8081/ws-stock'),\n        debug: str => console.log(str)\n      });\n      this.client.onConnect = frame => {\n        this.client.subscribe('/topic/stock', message => {\n          const data = JSON.parse(message.body);\n          this.stock$.next(data);\n        });\n      };\n      this.client.activate(); // Start the connection\n    }\n    // Observable for components to subscribe\n    listen() {\n      return this.stock$.asObservable();\n    }\n    static ɵfac = function InventoryService_Factory(t) {\n      return new (t || InventoryService)();\n    };\n    static ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: InventoryService,\n      factory: InventoryService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n  return InventoryService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}