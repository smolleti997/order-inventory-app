{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport * as Stomp from '@stomp/stompjs';\nimport * as SockJS from 'sockjs-client';\nimport * as i0 from \"@angular/core\";\nexport let InventoryService = /*#__PURE__*/(() => {\n  class InventoryService {\n    client;\n    stock$ = new BehaviorSubject(null);\n    constructor() {\n      this.connect();\n    }\n    connect() {\n      const socket = new SockJS('http://localhost:8081/ws-stock');\n      this.client = Stomp.over(socket);\n      this.client.connect({}, () => {\n        this.client?.subscribe('/topic/stock', msg => {\n          const data = JSON.parse(msg.body);\n          this.stock$.next(data);\n        });\n      });\n    }\n    // Observable for components to subscribe\n    listen() {\n      return this.stock$.asObservable();\n    }\n    static ɵfac = function InventoryService_Factory(t) {\n      return new (t || InventoryService)();\n    };\n    static ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: InventoryService,\n      factory: InventoryService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n  return InventoryService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}